@using GameStore.Web.ViewModels

@model IEnumerable<CommentViewModel>



@{
    ViewBag.Title = "Menu";
   
}

<h2>Menu</h2>

@{
    ViewBag.Title = "Comments";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<ul class="menu">
    @foreach(var mp in Model.Where(p=>p.ParentCommentId ==null))
    {

        <li>

            @if (Model.Count(p => p.ParentCommentId == mp.Id) > 0)
            {
                @:<ul>
        }

            @RenderMenuItem(Model.ToList(), mp)

            @if (Model.Count(p => p.ParentCommentId == mp.Id) > 0)
            {
                @:</ul>
       }

        </li>
    }
</ul>

@helper RenderMenuItem(List<CommentViewModel> menuList, CommentViewModel mi)
{
foreach (var cp in menuList.Where(p => p.ParentCommentId == mi.Id))
{


        @:<li>






    if (menuList.Count(p => p.ParentCommentId == mi.Id) > 0)
    {
            @:<ul>
        }

        @RenderMenuItem(menuList, cp)

    if (menuList.Count(p => p.ParentCommentId == mi.Id) > 0)
    {
            @:</ul>
      }
    else
    {
            @:</li>
      }
    }
}


